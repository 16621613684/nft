<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="UTF-8">
		<title>AUCTION</title>
		<link type="text/css" rel="stylesheet" href="/css/wallet.css">
		<link type="text/css" rel="stylesheet" href="/css/own.css">
		<script type="text/javascript" src="/css/jquery-3.5.1.min.js"></script>
		<script type="text/javascript">
			window.onload = function() {
				var b_buy = document.getElementById("buy");
				var b_sale = document.getElementById("sale");
				b_buy.onmouseover = onMouseOver();
				b_sale.onmouseover = onMouseOver();
				b_buy.onclick = function() {
					document.getElementById("buy_box").style.display = "block";
					document.getElementById("sale_box").style.display = "none";
					buy.style.borderBottom = "1px solid black";
					sale.style.borderBottom = "";
				};
				b_sale.onclick = function() {
					document.getElementById("buy_box").style.display = "none";
					document.getElementById("sale_box").style.display = "block";
					buy.style.borderBottom = "";
					sale.style.borderBottom = "1px solid black";
				};

				function onMouseOver() {
					buy.style.cursor = "pointer";
					sale.style.cursor = "pointer";
				}

				$(function (){
					$("#buy_box").on("click", ":button", function(event) {
						$("#number").val( $(this).closest("tr").find("td").eq(0).text());
					});
				})
			}
		</script>
		<style type="text/css">
			#all_window{ /*整个弹窗的页面*/
				opacity: 0.8; /*透明度*/
				width: 100%; /*宽度*/
				height: 100%; /*高度，不能百分百*/
				background: #000; /*背景色*/
				position: absolute;
				top: 0;
				left: 0; /*定位*/
				display: none; /*隐藏*/
				z-index: 1000; /*覆盖*/
			}
			#window{ /* 弹框的页面*/
				width: 500px; /*宽度*/
				height: auto; /*高度*/
				background: #fff; /*背景色*/
				display: none; /*隐藏*/
				z-index: 1020; /*覆盖*/
				position: absolute;
				top: 200px;
				left: 500px; /* 定位*/
			}
			input{
				margin-bottom: 10px;
			}
		</style>
	</head>
	<body>
		<div class="logo">
			<a th:href="@{/backHome}"><img src="images/logo.png"></a>
		</div>
		<h1>我的拍卖</h1>
		<br>
		<hr>
		<h2>拍卖记录</h2>
		<hr>
		<button id="buy" style="border-bottom: 1px solid black;">拍卖中</button><button id="sale">已拍出</button>
		<table id="buy_box">
			<thead>
				<tr>
					<th>ID</th>
					<th>图片</th>
					<th>藏品名</th>
					<th>作者</th>
					<th>起拍价</th>
					<th>结束时间</th>
					<th>当前价格</th>
					<th>出价最高者</th>
					<th>出价记录</th>
					<th>出价</th>
				</tr>
			</thead>
			<tbody>
			<tr th:each="Auction : ${availableList}" >
				<td th:text="*{Auction.id}" >1</td>
				<td> <img th:src="@{|/images/*{Auction.goodInfo.goodsImg}|}" alt=""></td>
				<td th:text="*{Auction.goodInfo.goodsName}" >1</td>
				<td th:text="*{Auction.goodInfo.author}" >1</td>
				<td th:text="*{Auction.startingPrice}" >1</td>
				<td th:text="*{Auction.endTime}" >1</td>
				<td th:text="*{Auction.currentPrice}" >1</td>
				<td th:text="*{Auction.highestBidderName}" >1</td>
				<td ><a th:href="@{/auction/}+*{Auction.id}"><img src="images/xiangqing.png" style="width: 25px;height: 25px"></a></td>
				<td><button type="submit" style="border: none;background: none"><a href="#" onclick="bid()"><img src="/images/bid.png" style="width: 37px;height: 45px"></a></button></td>
			</tr>

			</tbody>
		</table>
		<table id="sale_box">
			<thead>
			<tr>
				<th>ID</th>
				<th>图片</th>
				<th>藏品名</th>
				<th>作者</th>
				<th>起拍价</th>
				<th>结束时间</th>
				<th>当前价格</th>
				<th>出价最高者</th>
				<th>出价记录</th>
			</tr>
			</thead>
			<tbody>
			<tr th:each="Auction : ${soldList}" >
				<td th:text="*{Auction.id}" >1</td>
				<td> <img th:src="@{|/images/*{Auction.goodInfo.goodsImg}|}" alt=""></td>
				<td th:text="*{Auction.goodInfo.goodsName}" >1</td>
				<td th:text="*{Auction.goodInfo.author}" >1</td>
				<td th:text="*{Auction.startingPrice}" >1</td>
				<td th:text="*{Auction.endTime}" >1</td>
				<td th:text="*{Auction.currentPrice}" >1</td>
				<td th:text="*{Auction.highestBidderName}" >1</td>
				<td ><a th:href="@{/auction/}+*{Auction.id}"><img src="images/xiangqing.png" style="width: 25px;height: 25px"></a></td>
			</tr>
			</tbody>
		</table>
		<div id="window">
			<form th:action="@{/bid}" method="post">
				<h1>我的出价</h1>
				<label>
					<input id="number" type="hidden" name="auctionId">
				</label>
				<label>
					<input id="price" type="number" name="price" placeholder="请输入价格">
				</label>
				<label>
					<span>&nbsp;</span>
					<button id="send" type="submit">提交</button>
				</label>
			</form>
		</div>
		<div id="all_window">
		</div>
	</body>
	<script>
		function bid(){
			document.getElementById('all_window').style.display = "block";
			document.getElementById('window').style.display = "block";
		}
		// 在页面加载时替换 buy_box 表中第六列中的 "T" 为 " "
		document.addEventListener('DOMContentLoaded', function() {
			var cells_buy = document.querySelectorAll('table#buy_box td:nth-child(6)');
			cells_buy.forEach(function(cell) {
				cell.textContent = cell.textContent.replace(/T/g, ' ');
			});
		});

		// 在页面加载时替换 sale_box 表中第六列中的 "T" 为 " "
		document.addEventListener('DOMContentLoaded', function() {
			var cells_sale = document.querySelectorAll('table#sale_box td:nth-child(6)');
			cells_sale.forEach(function(cell) {
				cell.textContent = cell.textContent.replace(/T/g, ' ');
			});
		});
	</script>
</html>
